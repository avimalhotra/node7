<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
</head>
<body>
    <h1>AJAX API</h1>
    <h2></h2>
    <img class="loader" src="ajax/loader.gif" alt="" hidden="">
    <input type="number" min="1" max="7" >
    <button>AJAX API</button>
    <div class="data"></div>
<script>
    "use strict"
    
document.querySelector('input').addEventListener("keyup",function(){
    var ajax=new XMLHttpRequest();  // xhr
      
    //ajax.open("get","https://api.github.com/users/avimalhotra");
    ajax.open("post","http://127.0.0.1:3000/api");
    //ajax.send("index:"+ this.value);
    ajax.send('name:'+ this.value);
    
    ajax.onreadystatechange=function(){
   
        
    if( this.readyState==0 || this.readyState==1 || this.readyState==2 || this.readyState==3 ){
            console.log("Data Processing");   
        }
    else if(this.readyState==4 && this.status==200){
        
        
        document.querySelector(".data").innerHTML="<h2>Data Fetching Completed</h2>";
         
        var t=this.response;       // string 
        
        t=JSON.parse(t);
       document.querySelector(".data").innerHTML+="<p>"+ t+"</p>";
    
        
       }
        else{
            document.querySelector(".data").innerHTML="<pre>Could Not Fetch  Data</pre>";
            
        }
       
            
    
    }
    
})    
  
    
    
</script>
</body>
</html>